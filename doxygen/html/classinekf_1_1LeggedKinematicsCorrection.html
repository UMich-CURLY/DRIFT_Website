<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CURLY State Estimator: inekf::LeggedKinematicsCorrection Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CURLY State Estimator
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceinekf.html">inekf</a></li><li class="navelem"><a class="el" href="classinekf_1_1LeggedKinematicsCorrection.html">LeggedKinematicsCorrection</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="classinekf_1_1LeggedKinematicsCorrection-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">inekf::LeggedKinematicsCorrection Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="legged__kinematics__correction_8h_source.html">legged_kinematics_correction.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for inekf::LeggedKinematicsCorrection:</div>
<div class="dyncontent">
<div class="center"><img src="classinekf_1_1LeggedKinematicsCorrection__inherit__graph.png" border="0" usemap="#ainekf_1_1LeggedKinematicsCorrection_inherit__map" alt="Inheritance graph"/></div>
<map name="ainekf_1_1LeggedKinematicsCorrection_inherit__map" id="ainekf_1_1LeggedKinematicsCorrection_inherit__map">
<area shape="rect" title=" " alt="" coords="5,79,231,104"/>
<area shape="rect" href="classCorrection.html" title=" " alt="" coords="77,5,159,31"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for inekf::LeggedKinematicsCorrection:</div>
<div class="dyncontent">
<div class="center"><img src="classinekf_1_1LeggedKinematicsCorrection__coll__graph.png" border="0" usemap="#ainekf_1_1LeggedKinematicsCorrection_coll__map" alt="Collaboration graph"/></div>
<map name="ainekf_1_1LeggedKinematicsCorrection_coll__map" id="ainekf_1_1LeggedKinematicsCorrection_coll__map">
<area shape="rect" title=" " alt="" coords="5,79,231,104"/>
<area shape="rect" href="classCorrection.html" title=" " alt="" coords="77,5,159,31"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Constructors</div></td></tr>
<tr class="memitem:aa86587eaea00fb314e36b990af0e179b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinekf_1_1LeggedKinematicsCorrection.html#aa86587eaea00fb314e36b990af0e179b">LeggedKinematicsCorrection</a> (<a class="el" href="namespaceinekf.html#af58e7c120bdba6c59f5cc640ecbe54c3">LeggedKinematicsQueuePtr</a> sensor_data_buffer_ptr, std::shared_ptr&lt; std::mutex &gt; sensor_data_buffer_mutex_ptr, const <a class="el" href="namespaceinekf.html#a54f36ab506f272d39a8d34f68e419455">ErrorType</a> &amp;error_type, const std::string &amp;yaml_filepath)</td></tr>
<tr class="memdesc:aa86587eaea00fb314e36b990af0e179b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for the correction class.  <a href="classinekf_1_1LeggedKinematicsCorrection.html#aa86587eaea00fb314e36b990af0e179b">More...</a><br /></td></tr>
<tr class="separator:aa86587eaea00fb314e36b990af0e179b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Correction Methods</div></td></tr>
<tr class="memitem:a9800570c15a530def1f1d45bb8372e2d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinekf_1_1LeggedKinematicsCorrection.html#a9800570c15a530def1f1d45bb8372e2d">Correct</a> (<a class="el" href="classRobotState.html">RobotState</a> &amp;state)</td></tr>
<tr class="memdesc:a9800570c15a530def1f1d45bb8372e2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Corrects the state estimate using the measured forward kinematics between the IMU and a set of contact frames. If contact is indicated but not included in the state, the state is augmented to include the estimated contact position. If contact is not indicated but is included in the state, the contact position is marginalized out of the state. This is a right-invariant measurement model.  <a href="classinekf_1_1LeggedKinematicsCorrection.html#a9800570c15a530def1f1d45bb8372e2d">More...</a><br /></td></tr>
<tr class="separator:a9800570c15a530def1f1d45bb8372e2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Getters</div></td></tr>
<tr class="memitem:a5d12b032f2305b7f6e563f38379fd2d2"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="namespaceinekf.html#af58e7c120bdba6c59f5cc640ecbe54c3">LeggedKinematicsQueuePtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinekf_1_1LeggedKinematicsCorrection.html#a5d12b032f2305b7f6e563f38379fd2d2">get_sensor_data_buffer_ptr</a> () const</td></tr>
<tr class="memdesc:a5d12b032f2305b7f6e563f38379fd2d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the pointer of the sensor data buffer.  <a href="classinekf_1_1LeggedKinematicsCorrection.html#a5d12b032f2305b7f6e563f38379fd2d2">More...</a><br /></td></tr>
<tr class="separator:a5d12b032f2305b7f6e563f38379fd2d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classCorrection"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classCorrection')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classCorrection.html">Correction</a></td></tr>
<tr class="memitem:ab2b5a19788aa1940ca828c450a5f5d4f inherit pub_methods_classCorrection"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCorrection.html#ab2b5a19788aa1940ca828c450a5f5d4f">Correction</a> ()</td></tr>
<tr class="memdesc:ab2b5a19788aa1940ca828c450a5f5d4f inherit pub_methods_classCorrection"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for the base correction class.  <a href="classCorrection.html#ab2b5a19788aa1940ca828c450a5f5d4f">More...</a><br /></td></tr>
<tr class="separator:ab2b5a19788aa1940ca828c450a5f5d4f inherit pub_methods_classCorrection"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af45413effab911ffda2b77f6bb730314 inherit pub_methods_classCorrection"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCorrection.html#af45413effab911ffda2b77f6bb730314">Correction</a> (std::shared_ptr&lt; std::mutex &gt; sensor_data_buffer_mutex_ptr)</td></tr>
<tr class="memdesc:af45413effab911ffda2b77f6bb730314 inherit pub_methods_classCorrection"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new <a class="el" href="classCorrection.html">Correction</a> object with mutex.  <a href="classCorrection.html#af45413effab911ffda2b77f6bb730314">More...</a><br /></td></tr>
<tr class="separator:af45413effab911ffda2b77f6bb730314 inherit pub_methods_classCorrection"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a273bb96e5cda592dbe1ea375cc847864 inherit pub_methods_classCorrection"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="base__correction_8h.html#a8e77af02b888a3b41151a1bfdef770c1">MeasurementQueuePtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCorrection.html#a273bb96e5cda592dbe1ea375cc847864">get_sensor_data_buffer_ptr</a> ()</td></tr>
<tr class="memdesc:a273bb96e5cda592dbe1ea375cc847864 inherit pub_methods_classCorrection"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the pointer to the sensor data buffer.  <a href="classCorrection.html#a273bb96e5cda592dbe1ea375cc847864">More...</a><br /></td></tr>
<tr class="separator:a273bb96e5cda592dbe1ea375cc847864 inherit pub_methods_classCorrection"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf643392b4d107e71664f24261b1c6e4 inherit pub_methods_classCorrection"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="base__correction_8h.html#a9266b7a222c90ab4055a2e81c13d20c3">CorrectionType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCorrection.html#aaf643392b4d107e71664f24261b1c6e4">get_correction_type</a> () const</td></tr>
<tr class="memdesc:aaf643392b4d107e71664f24261b1c6e4 inherit pub_methods_classCorrection"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the correction type.  <a href="classCorrection.html#aaf643392b4d107e71664f24261b1c6e4">More...</a><br /></td></tr>
<tr class="separator:aaf643392b4d107e71664f24261b1c6e4 inherit pub_methods_classCorrection"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab882dd008b9624ab92b7ed09a2a1f86d inherit pub_methods_classCorrection"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; std::mutex &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCorrection.html#ab882dd008b9624ab92b7ed09a2a1f86d">get_mutex_ptr</a> ()</td></tr>
<tr class="memdesc:ab882dd008b9624ab92b7ed09a2a1f86d inherit pub_methods_classCorrection"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the pointer to the mutex of the sensor data buffer.  <a href="classCorrection.html#ab882dd008b9624ab92b7ed09a2a1f86d">More...</a><br /></td></tr>
<tr class="separator:ab882dd008b9624ab92b7ed09a2a1f86d inherit pub_methods_classCorrection"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_classCorrection"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classCorrection')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classCorrection.html">Correction</a></td></tr>
<tr class="memitem:a4804a1e303fb05d2b9ebdde736a7bebc inherit pro_attribs_classCorrection"><td class="memItemLeft" align="right" valign="top">const Eigen::Vector3d&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCorrection.html#a4804a1e303fb05d2b9ebdde736a7bebc">g_</a></td></tr>
<tr class="separator:a4804a1e303fb05d2b9ebdde736a7bebc inherit pro_attribs_classCorrection"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a233c2fa847ebd22e065de38498bde5df inherit pro_attribs_classCorrection"><td class="memItemLeft" align="right" valign="top">Eigen::Vector3d&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCorrection.html#a233c2fa847ebd22e065de38498bde5df">magnetic_field_</a></td></tr>
<tr class="separator:a233c2fa847ebd22e065de38498bde5df inherit pro_attribs_classCorrection"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a956bfad69d082a1174d030dffbb49291 inherit pro_attribs_classCorrection"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base__correction_8h.html#a9266b7a222c90ab4055a2e81c13d20c3">CorrectionType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCorrection.html#a956bfad69d082a1174d030dffbb49291">correction_type_</a></td></tr>
<tr class="separator:a956bfad69d082a1174d030dffbb49291 inherit pro_attribs_classCorrection"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8af93fbeaf0174c2b016c031402bf07e inherit pro_attribs_classCorrection"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCorrection.html#a8af93fbeaf0174c2b016c031402bf07e">t_diff_thres_</a></td></tr>
<tr class="separator:a8af93fbeaf0174c2b016c031402bf07e inherit pro_attribs_classCorrection"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fa4911fc9cd21586bfb1525eaca3612 inherit pro_attribs_classCorrection"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; std::mutex &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCorrection.html#a2fa4911fc9cd21586bfb1525eaca3612">sensor_data_buffer_mutex_ptr_</a></td></tr>
<tr class="separator:a2fa4911fc9cd21586bfb1525eaca3612 inherit pro_attribs_classCorrection"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >A class for state correction using foot kinematics and contact events. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa86587eaea00fb314e36b990af0e179b" name="aa86587eaea00fb314e36b990af0e179b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa86587eaea00fb314e36b990af0e179b">&#9670;&#160;</a></span>LeggedKinematicsCorrection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">inekf::LeggedKinematicsCorrection::LeggedKinematicsCorrection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceinekf.html#af58e7c120bdba6c59f5cc640ecbe54c3">LeggedKinematicsQueuePtr</a>&#160;</td>
          <td class="paramname"><em>sensor_data_buffer_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; std::mutex &gt;&#160;</td>
          <td class="paramname"><em>sensor_data_buffer_mutex_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespaceinekf.html#a54f36ab506f272d39a8d34f68e419455">ErrorType</a> &amp;&#160;</td>
          <td class="paramname"><em>error_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>yaml_filepath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor for the correction class. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sensor_data_buffer_ptr</td><td>Pointer to the buffer of sensor data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sensor_data_buffer_mutex_ptr</td><td>Pointer to the mutex for the sensor data buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">error_type</td><td>Error type for the correction. LeftInvariant or RightInvariant </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">aug_map_type</td><td>Type of the augmented states in this correction method. For example, one can use "contact" to indicate the augment state in this correction method are contact positions </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">yaml_filepath</td><td>Path of the yaml file for the correction </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool: successfully correct state or not (if we do not receive a new message and this method is called it'll return false.) </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9800570c15a530def1f1d45bb8372e2d" name="a9800570c15a530def1f1d45bb8372e2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9800570c15a530def1f1d45bb8372e2d">&#9670;&#160;</a></span>Correct()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool inekf::LeggedKinematicsCorrection::Correct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRobotState.html">RobotState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Corrects the state estimate using the measured forward kinematics between the IMU and a set of contact frames. If contact is indicated but not included in the state, the state is augmented to include the estimated contact position. If contact is not indicated but is included in the state, the contact position is marginalized out of the state. This is a right-invariant measurement model. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">[in/out]</td><td>state: the current state estimate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool: successfully correct state or not (if we do not receive a new message and this method is called it'll return false.) </dd></dl>
<p >TODO: Be sure to also change and check the whole function</p>

<p>Reimplemented from <a class="el" href="classCorrection.html#a414ade1e06bf1d61bc12cb40c80bde6e">Correction</a>.</p>

</div>
</div>
<a id="a5d12b032f2305b7f6e563f38379fd2d2" name="a5d12b032f2305b7f6e563f38379fd2d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d12b032f2305b7f6e563f38379fd2d2">&#9670;&#160;</a></span>get_sensor_data_buffer_ptr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="namespaceinekf.html#af58e7c120bdba6c59f5cc640ecbe54c3">LeggedKinematicsQueuePtr</a> inekf::LeggedKinematicsCorrection::get_sensor_data_buffer_ptr </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the pointer of the sensor data buffer. </p>
<dl class="section return"><dt>Returns</dt><dd>LeggedKinematicsQueuePtr: pointer of the sensor data buffer </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/Users/justinyu/Desktop/curly_state_estimator/include/filter/inekf/correction/<a class="el" href="legged__kinematics__correction_8h_source.html">legged_kinematics_correction.h</a></li>
<li>/Users/justinyu/Desktop/curly_state_estimator/src/filter/inekf/correction/<a class="el" href="legged__kinematics__correction_8cpp.html">legged_kinematics_correction.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
